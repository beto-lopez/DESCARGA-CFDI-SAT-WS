<!DOCTYPE HTML>
<html lang>
<head>
<!-- Generated by javadoc (17) on Tue Feb 18 20:32:06 CST 2025 -->
<title>com.sicomsa.dmt (com.sicomsa.dmt 1.0-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="dc.created" content="2025-02-18">
<meta name="description" content="declaration: package: com.sicomsa.dmt">
<meta name="generator" content="javadoc/PackageWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../script-dir/jquery-ui.min.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../jquery-ui.overrides.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="package-declaration-page">
<script type="text/javascript">var evenRowColor = "even-row-color";
var oddRowColor = "odd-row-color";
var tableTab = "table-tab";
var activeTableTab = "active-table-tab";
var pathtoroot = "../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top">
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../index.html">Overview</a></li>
<li class="nav-bar-cell1-rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html#package">Help</a></li>
</ul>
</div>
<div class="sub-nav">
<div>
<ul class="sub-nav-list">
<li>Package:&nbsp;</li>
<li><a href="#package-description">Description</a>&nbsp;|&nbsp;</li>
<li><a href="#related-package-summary">Related Packages</a>&nbsp;|&nbsp;</li>
<li><a href="#class-summary">Classes and Interfaces</a></li>
</ul>
</div>
<div class="nav-list-search"><label for="search-input">SEARCH:</label>
<input type="text" id="search-input" value="search" disabled="disabled">
<input type="reset" id="reset-button" value="reset" disabled="disabled">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<div class="header">
<h1 title="Package com.sicomsa.dmt" class="title">Package com.sicomsa.dmt</h1>
</div>
<hr>
<div class="package-signature">package <span class="element-name">com.sicomsa.dmt</span></div>
<section class="package-description" id="package-description">
<div class="block">Provides classes and interfaces to consume SAT's massive download web service.
 
 <p>See:&nbsp;<a href="#spanish">Español</a></p>
 <p>To be able to perform a download, the following steps are required:</p>
 <ul>
 <li>Authenticate with SAT using valid and current credentials to obtain a token
 that we can use for a few minutes and that will be requested in each of the following steps.</li>
 <li>Request a download with the parameters we define, to be able to obtain a
 request Id with which we can verify the request we made.</li>
 <li>Verify the request so that when its verification is concluded, we can obtain
 the names of the packages we need to request download. Verification is not
 immediate and we will probably require several attempts until it is ready.</li>
 <li>For each package name or identifier we receive, request its download to
 receive each package and be able to save it.</li>
 </ul>
 
 The <a href="DMTService.html" title="interface in com.sicomsa.dmt"><code>DMTService</code></a> class contains the methods to authenticate; request;
 verify and download the packages. It is not advisable to use it outside of a
 <a href="DMTClient.html" title="interface in com.sicomsa.dmt"><code>DMTClient</code></a> that should be the one using <code>DMTService</code>
 and thus be able to manage its tokens. However, we are going to describe
 <code>DMTService</code>'s methods for the purpose of explaining the classes
 within this package.
 
 <p><strong><code>DMTService</code> Methods:</strong></p>
 
 <p><strong>public <a href="Authorization.html" title="class in com.sicomsa.dmt"><code>Authorization</code></a> authenticate(SOAPConnection conn,
      <a href="Credentials.html" title="interface in com.sicomsa.dmt"><code>Credentials</code></a> creds) throws SOAPException;</strong></p>
 <ul>
 <li>Invokes the <b>authentication service</b> using the connection and credentials
 received as parameters</li>
 <li>Returns SAT's response in an <code>Authorization</code> class that contains
 the received token and other methods that help us to know the validity of the
 received authorization.</li>
 </ul>
 
 <p><strong>public <a href="SolicitaResponse.html" title="class in com.sicomsa.dmt"><code>SolicitaResponse</code></a> request(SOAPConnection conn, Credentials creds,
      <a href="Query.html" title="interface in com.sicomsa.dmt"><code>Query</code></a> query, String token) throws SOAPException;</strong></p>
 <ul>
 <li>Invokes the <b>download request service</b> using the received connection,
 query, and token as parameters.</li>
 <li><code>Query</code> contains the parameters of the CFDI's
 we want to download. Its period, or its status, type of download, etc.</li>
 <li>This method parses the request response into the <code>SolicitaResponse</code> class that
 contains the request Id that we can use to verify the request.</li>
 <li><code>SolicitaResponse</code> includes the request status code and the
 message received in the response of the request we made, since the request could
 be rejected for different reasons.</li>
 </ul>
 
 <p><strong>public <a href="VerificaResponse.html" title="class in com.sicomsa.dmt"><code>VerificaResponse</code></a> verify(SOAPConnection conn, Credentials creds,
      String requestId, String token) throws SOAPException;</strong></p>
 <ul>
 <li>Invokes the <b>verify request service</b> with the received parameters.
 In particular, it invokes to verify the id received in the <code>requestId</code> parameter.</li>
 <li>This method returns the SAT response in the <code>VerificaResponse</code> class that
 contains methods to know if the verification was rejected and why. Or if the
 verification is still not finished; or if it has already successfully concluded.<br>
 <li><code>VerificaResponse</code> also has methods to extract the names of the
 packages that need to be downloaded.</li>
 </ul>
 
 <p><strong>public <a href="DescargaResponse.html" title="class in com.sicomsa.dmt"><code>DescargaResponse</code></a> download(SOAPConnection conn, Credentials creds,
      String packageId, String token) throws SOAPException;</strong></p>
 <ul>
 <li>Invokes the <b>package download service</b>, in particular the package received
 as the <code>packageId</code> parameter.</li>
 <li>This method returns the response in a <code>DescargaResponse</code> instance
 that contains the download status; the response message, and if the request
 was accepted: the downloaded package to be saved.</li>
 </ul>
 
 <p><strong>public <a href="DownloadRepository.html" title="interface in com.sicomsa.dmt"><code>DownloadRepository</code></a> getRepository();</strong></p>
 <ul>
 <li>With this method, we will be able to save the packages we are downloading.</li>
 </ul>
 
 <br>
 <hr>
 <a id="spanish"></a>
 
 <p>Contiene las clases e interfaces definidas para poder consumir
 el servicio de descarga masiva de CFDI´s de SAT web service.</p>
 
 <p>Para poder realizar una descarga se requieren los siguientes pasos:</p>
 <ul>
 <li>Autenticarnos con SAT con las credenciales válidas y vigentes para obtener
    un token que podremos usar por algunos minutos y que se nos pedirá en cada
    uno de los siguientes pasos.</li>
 <li>Solicitar una descarga con los parámetros que definamos, para poder obtener
    un IdSolicitud con el que podremos verificar la solicitud que hicimos.</li>
 <li>Verificar la solicitud para cuando concluya su verificación poder obtener
    los nombres de los paquetes que requerimos solicitar descargar. La verificación
    no es inmediata y probablemente requeriremos varios intentos hasta que esté.</li>
 <li>Por cada nombre o identificador de paquete que recibimos, solicitar su
    descarga para ir así recibiendo cada paquete y poderlo guardar.</li>
 </ul>
 <p>La clase <a href="DMTService.html" title="interface in com.sicomsa.dmt"><code>DMTService</code></a> contiene los métodos para autenticarnos; solicitar;
 verificar y descargar los paquetes. No es recomendable usarlo fuera de un
 <a href="DMTClient.html" title="interface in com.sicomsa.dmt"><code>DMTClient</code></a> que es quien debería ser quien use <code>DMTService</code>
 y así pueda administrar sus tokens. Sin embargo, vamos a describir los métodos
 de <code>DMTService</code> para efectos de explicar las clases dentro de este paquete.</p>
 
 <p><strong>Métodos de <code>DMTService</code>:</strong>
 
 <p><strong>public <a href="Authorization.html" title="class in com.sicomsa.dmt"><code>Authorization</code></a> autentica(SOAPConnection conn,
      <a href="Credentials.html" title="interface in com.sicomsa.dmt"><code>Credentials</code></a> creds) throws SOAPException;</strong></p>
 <p>Invoca al <b>servicio de autenticación</b> de SAT usando la conexión y credenciales
 recibidas como parámetros y retorna la respuesta de SAT en una instancia de 
 <code>Authorization</code> que contiene el token recibido y otros métodos que nos sirven
 para conocer la vigencia de la autorización recibida.</p>
 
 <p><strong>public <a href="SolicitaResponse.html" title="class in com.sicomsa.dmt"><code>SolicitaResponse</code></a> solicita(SOAPConnection conn,
      Credentials creds, <a href="Query.html" title="interface in com.sicomsa.dmt"><code>Query</code></a> query, String token) throws SOAPException;</strong></p>
 <ul>
 <li>Invoca el servicio de solicitud de descarga de SAT usando la conexión, query
 y token recibidos como parámetros.</li>
 <li><code>Query</code> contiene los parámetros de los CFDI's que queremos descargar.
 Su período, su estado, tipo de descarga, etc.</li>
 <li>Este método retorna la respuesta de la solicitud en una instancia de
 <code>SolicitaResponse</code> que contiene el IdSolicitud que podremos usar
 para verificar la solicitud.</li>
 <li><code>SolicitaResponse</code> también tiene el código de estatus de la
 solicitud y el mensaje que se recibió en la respuesta de la solicitud que
 hicimos, puesto que la solicitud pudiera haber sido rechazada por diferentes motivos.</li>
 </ul>
 
 <p><strong>public <a href="VerificaResponse.html" title="class in com.sicomsa.dmt"><code>VerificaResponse</code></a> verifica(SOAPConnection conn,
      Credentials creds, String requestId, String token) throws SOAPException;</strong></p>
 <ul>
 <li>Invoca <b>servicio de verificación de descarga</b> con los parámetros recibidos.
 En particular lo invoca para verificar la IdSolicitud recibida en el parámetro requestId.</li>
 <li>Este método retorna la respuesta de SAT en la clase <code>VerificaResponse</code>
 que contiene métodos para saber si la verificación fue rechazada y por qué.<br>
 O si la verificación todavía no está terminada; o si ya concluyó satisfactoriamente y en dicho caso
 tiene métodos para extraer los nombres de los paquetes que se requiere descargar.</li>
 </ul>
 
 <p><strong>public <a href="DescargaResponse.html" title="class in com.sicomsa.dmt"><code>DescargaResponse</code></a> descarga (SOAPConnection conn,
      Credentials creds, String packageId, String token) throws SOAPException;</strong></p>
 <ul>
 <li>Invoca <b>servicio de descarga de paquetes</b> de SAT, en particular el paquete
 recibido como parámetro packageId.</li>
 <li>Este método retorna la respuesta en una instancia de <code>DescargaResponse</code> que
 contiene el estatus de la descarga, el mensaje de la respuesta y de haberse
 aceptado la petición: el paquete descargado a guardar.</li>
 </ul>
 
 <p><strong>public <a href="DownloadRepository.html" title="interface in com.sicomsa.dmt"><code>DownloadRepository</code></a> getRepository();</strong></p>
 <ul>
 <li>Mediante este método podremos guardar las descargas que vayamos haciendo.</li>
 </ul></div>
<dl class="notes">
<dt>Since:</dt>
<dd>1.0</dd>
<dt>Version:</dt>
<dd>2025.02.08</dd>
<dt>Author:</dt>
<dd><a href="https://www.linkedin.com/in/alberto-carlos-lopez-montemayor-586202198">Beto Lopez</a></dd>
</dl>
</section>
<section class="summary">
<ul class="summary-list">
<li>
<div id="related-package-summary">
<div class="caption"><span>Related Packages</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Package</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><a href="solicitude/package-summary.html">com.sicomsa.dmt.solicitude</a></div>
<div class="col-last even-row-color">
<div class="block">This package contains the classes and interfaces needed to encapsulate the
 status and information of a digital certificates download request using the
 SAT massive download web service.</div>
</div>
<div class="col-first odd-row-color"><a href="svc/package-summary.html">com.sicomsa.dmt.svc</a></div>
<div class="col-last odd-row-color">
<div class="block">This package contains classes that implement SAT's massive download web service.</div>
</div>
<div class="col-first even-row-color"><a href="util/package-summary.html">com.sicomsa.dmt.util</a></div>
<div class="col-last even-row-color">
<div class="block">Utility classes to help with <code>SOAP</code> message conversion to strings
 and from strings; write and read them from Files, and some parsing.</div>
</div>
</div>
</div>
</li>
<li>
<div id="class-summary">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="class-summary-tab0" role="tab" aria-selected="true" aria-controls="class-summary.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary', 2)" class="active-table-tab">All Classes and Interfaces</button><button id="class-summary-tab1" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab1', 2)" class="table-tab">Interfaces</button><button id="class-summary-tab2" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab2', 2)" class="table-tab">Classes</button><button id="class-summary-tab5" role="tab" aria-selected="false" aria-controls="class-summary.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('class-summary', 'class-summary-tab5', 2)" class="table-tab">Exceptions</button></div>
<div id="class-summary.tabpanel" role="tabpanel">
<div class="summary-table two-column-summary" aria-labelledby="class-summary-tab0">
<div class="table-header col-first">Class</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="Authorization.html" title="class in com.sicomsa.dmt">Authorization</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block"><code>Authorization</code> contains the token provided from SAT to access
 massive download web services.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="Client.html" title="class in com.sicomsa.dmt">Client</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block"><code>Client</code> is an implementation of <code>DMTClient</code> that calls
 <code>DMTService</code> in order to consume the massive cfdi download service.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="Credentials.html" title="interface in com.sicomsa.dmt">Credentials</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block"><code>Credentials</code> contains the methods needed in order to sign SOAP
 requests for the massive cfdi download service, for a singular contributor.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="CredentialsProxy.html" title="class in com.sicomsa.dmt">CredentialsProxy</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Abstract implementation of Credentials.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="CredentialsStore.html" title="interface in com.sicomsa.dmt">CredentialsStore</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">A storage for <code>Credentials</code>.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="DescargaResponse.html" title="class in com.sicomsa.dmt">DescargaResponse</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Represents a response of SAT's massive download web service, when requesting
 the download of a particular package</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="DMTClient.html" title="interface in com.sicomsa.dmt">DMTClient</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block"><code>DMTClient</code> contains methods needed for a contributor to download
 cfdis, and store them, at particular stages of the download process.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab1"><a href="DMTService.html" title="interface in com.sicomsa.dmt">DMTService</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab1">
<div class="block"><code>DMTService</code> includes the methods that consume the SAT's cfdis
 massive download web service.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="DownloadRepository.html" title="interface in com.sicomsa.dmt">DownloadRepository</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Repository that stores downloaded packages</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="PackageIds.html" title="class in com.sicomsa.dmt">PackageIds</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">This class containing the names or ids of the packages to be downloaded from SAT.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab1"><a href="Query.html" title="interface in com.sicomsa.dmt">Query</a></div>
<div class="col-last even-row-color class-summary class-summary-tab1">
<div class="block">Defines methods needed to create a request to the massive download web service.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="RealCredentials.html" title="class in com.sicomsa.dmt">RealCredentials</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">This class is an implementation of <code>Credentials</code> that uses
 a private key in order to implement the <code>sign</code> method.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab5"><a href="RepositoryException.html" title="class in com.sicomsa.dmt">RepositoryException</a></div>
<div class="col-last even-row-color class-summary class-summary-tab5">
<div class="block">Base class for Repository related exceptions
 Note: this is a RuntimeException</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="SatResponse.html" title="class in com.sicomsa.dmt">SatResponse</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Abstract base for responses received from the SAT web service.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="SolicitaResponse.html" title="class in com.sicomsa.dmt">SolicitaResponse</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block"><code>SolicitaResponse</code> is SAT's response from a download request to
 the massive download web service when requesting a download for the first
 time of a particular query.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab5"><a href="SvcSignatureException.html" title="class in com.sicomsa.dmt">SvcSignatureException</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab5">
<div class="block">Exception indicating problems or failures while signing a SOAP request.</div>
</div>
<div class="col-first even-row-color class-summary class-summary-tab2"><a href="VerificaResponse.html" title="class in com.sicomsa.dmt">VerificaResponse</a></div>
<div class="col-last even-row-color class-summary class-summary-tab2">
<div class="block"><code>VerificaResponse</code> is SAT's response from a "verify download request"
 made to the massive download web service when requesting a verification for
 a particular request mapped by a <code>requestId</code> or (IdSolicitud)
 provided in a download request of a particular query.</div>
</div>
<div class="col-first odd-row-color class-summary class-summary-tab2"><a href="VerificaResponse.Builder.html" title="class in com.sicomsa.dmt">VerificaResponse.Builder</a></div>
<div class="col-last odd-row-color class-summary class-summary-tab2">
<div class="block">Utility class to facilitate creation of <code>VerificaResponse</code> instances.</div>
</div>
</div>
</div>
</div>
</li>
</ul>
</section>
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
